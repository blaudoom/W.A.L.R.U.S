package fi.blaudoom.pentestgui.service;

import fi.blaudoom.pentestgui.dao.ThymeleafTemplateRepository;
import fi.blaudoom.pentestgui.model.ThymeleafTemplate;
import fi.blaudoom.pentestgui.service.project.dto.ThymeleafTemplateDto;
import org.springframework.stereotype.Service;

@Service
public class TemplateServiceImpl implements TemplateService {
    private final ThymeleafTemplateRepository thymeleafTemplateRepository;

    public TemplateServiceImpl(ThymeleafTemplateRepository thymeleafTemplateRepository) {
        this.thymeleafTemplateRepository = thymeleafTemplateRepository;
    }

    @Override
    public ThymeleafTemplateDto getTemplate(String templateName) {
        ThymeleafTemplate template = thymeleafTemplateRepository.findByName(templateName);
        if (template == null) {
            return null;
        }
        return new ThymeleafTemplateDto(template.getName(), template.getTemplate());
    }

    @Override
    public Boolean modifyTemplate(ThymeleafTemplateDto template) {
        ThymeleafTemplate thymeleafTemplate = thymeleafTemplateRepository.findByName(template.getName());
        thymeleafTemplate.setTemplate(template.getTemplate());
        thymeleafTemplateRepository.save(thymeleafTemplate);
        return true;
    }
}
